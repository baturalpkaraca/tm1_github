SKIPCHECK;

['Fiili', 'PL', 'Amount'] = C: 0;

['Fiili', {'AVM_Depr_Beylikduzu', 'AVM_Depr_Karsiyaka', 'AVM_Depr_Yenibosna'}, 'Amount'] = N: STET;

['Fiili', 'Amount'] = N: IF( ELISPAR( 'PL_Acc', 'Store costs', !PL_Acc) = 1 &
      (ELISANC('Masraf_Kar_Merkezleri', 'Koçtaş', !Masraf_Kar_Merkezleri) = 0 &
      ELISANC('Masraf_Kar_Merkezleri', 'Fix', !Masraf_Kar_Merkezleri) = 0 &
      ELISANC('Masraf_Kar_Merkezleri', 'B2B', !Masraf_Kar_Merkezleri) = 0 &
      ELISANC('Masraf_Kar_Merkezleri', 'Marketplace', !Masraf_Kar_Merkezleri) = 0 &
      ELISANC('Masraf_Kar_Merkezleri', 'Ustabilir', !Masraf_Kar_Merkezleri) = 0 &
      ELISANC('Masraf_Kar_Merkezleri', 'B2C', !Masraf_Kar_Merkezleri) = 0), 0, CONTINUE );

['Fiili', 'Delivery', 'Amount'] = N:IF( DB( 'MM_V_P Fiili', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Mağaza Türü' ) @<> 'Depo', 
      DB( 'Fiili', 'Sales Transportation Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1, 0);

['Fiili', 'Distribution costs', 'Amount'] = N: IF( DB( 'MM_V_P Fiili', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Mağaza Türü'  ) @= 'Depo', 
      (DB( 'Fiili', 'COST', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, 0 );

['Fiili', 'Central costs', 'Amount'] = N: IF( DB( 'MM_V_P Fiili', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Mağaza Türü' ) @= 'Head Office' &
      !Masraf_Kar_Merkezleri @<> '9340001' & !Masraf_Kar_Merkezleri @<> '9347777', 
      - DB( 'Fiili', 'COST', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'TV & Radio Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Newspaper & Magazine Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Insert Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Advertisement Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Sales Transportation Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Bank Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Given Exchange Rate Differences', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Over Due Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Financial Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Credit Card Commissions', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8140203001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ), 0 );

['Fiili', 'Regional costs', 'Amount'] = N: IF( DB( 'MM_V_P Fiili', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Mağaza Türü' ) @= 'Bölgeler', 
      (DB( 'Fiili', 'COST', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, 0 );

['Fiili', 'NET SALES', 'Amount'] = N: IF( ELISANC( 'Masraf_Kar_Merkezleri', 'Ustabilir', !Masraf_Kar_Merkezleri ) = 1,
      (DB( 'Fiili', '600', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '601', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '610', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '611', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6020101002', 'Ustabilir', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6020101006', 'Ustabilir', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, CONTINUE);

['Fiili', 'NET SALES', 'Amount'] = N:
      (DB( 'Fiili', '600', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '601', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '610', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '611', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', '3P commission income (kdv dahil)', 'Amount'] = N: IF( ELISANC( 'Masraf_Kar_Merkezleri', 'Ustabilir', !Masraf_Kar_Merkezleri ) = 0, 
  (DB( 'Fiili', '6020101002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
   DB( 'Fiili', '6020101006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1 , CONTINUE );
      
['Fiili', '3P delivery cost (kdv dahil)', 'Amount'] = N: DB( 'Fiili', '6110300008', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', '3P other marketing income (kdv dahil)', 'Amount'] = N: 
  (DB( 'Fiili', '6020101004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) + 
   DB( 'Fiili', '6020101005', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
   DB( 'Fiili', '6490100026', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
   DB( 'Fiili', '6490100029', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
      
['Fiili', 'Stock transfer cost', 'Amount'] = N: DB( 'Fiili', '6210101002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', 'Supplier rebates', 'Amount'] = N: 
      (DB( 'Fiili', '6210201001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210201002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210202001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210202002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210203001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210203002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210204001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210204002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210205001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210205002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210206001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210207001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210208001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210209001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
      
['Fiili', 'Shrinkage', 'Amount'] = N:
     (DB( 'Fiili', '6210101006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210101007', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6210101009', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;    
 
['Fiili', '- term. benefit provision', 'Amount'] = N: - DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık' );

['Fiili', '- staff (Payroll)', 'Amount'] = N:
      (DB( 'Fiili', 'Salary', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Salary (1/3)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Vacation Fees', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Holiday Fees', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Heating Aids', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Education Aids', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Children Aids', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'SSK (Social Insurance)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Funds (Koç Holding Retirement Fund)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Unemployment Insurance', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Cash İndemity', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Board Members Fees', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık' )) * -1;

['Fiili', '- staff (exc. Payroll)', 'Amount'] = N:
      (DB( 'Fiili', 'Transportation for Personnel', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Food Expenses for Personnel', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Employee Equipment Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Termination & Notification Payment', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Children, Wedding & Military Service Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Medical Aids for Personnel', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Social Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Training Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', '- bonus', 'Amount'] = N: DB( 'Fiili', 'Bonus', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- rent', 'Amount'] = N: DB( 'Fiili', 'Rental Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- IT maintenance', 'Amount'] = N: IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025,
        (DB( 'Fiili', 'IT Maintenance (Koç Net & Etc.)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
         DB( 'Fiili', 'IT Application Hosting', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
         DB( 'Fiili', 'SAP Consultancy', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) ) * -1, CONTINUE);

['Fiili', '- IT maintenance', 'Amount'] = N:
        DB( 'Fiili', 'IT Maintenance (Koç Net & Etc.)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- repairs and maintenance', 'Amount'] = N:  
      (DB( 'Fiili', 'Maintenance', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'IT Maintenance (Koç Net & Etc.)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'IT Application Hosting', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'SAP Consultancy', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) + ['- IT maintenance']) * -1;

['Fiili', '- credit card charges', 'Amount'] = N:  
      (DB( 'Fiili', 'Credit Card Commissions', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', '8160900002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', '- utilities', 'Amount'] = N:  
      DB( 'Fiili', 'Utilities', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', '- printing and stationery', 'Amount'] = N:  
      DB( 'Fiili', 'Printing and stationery', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1; 
      
['Fiili', '- communications', 'Amount'] = N:  
      DB( 'Fiili', 'Communications', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', '- travel', 'Amount'] = N:  
      DB( 'Fiili', 'Travel', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', '- cleaning', 'Amount'] = N:  
      DB( 'Fiili', 'Cleaning', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', '- security', 'Amount'] = N:  
      DB( 'Fiili', 'Security', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;    
      
['Fiili', '- Tax, Duty and Fees', 'Amount'] = N: IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025, 
      (DB( 'Fiili', 'Tax, Duty and Fees', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8101700003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8101700004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, CONTINUE );
       
['Fiili', '- Tax, Duty and Fees', 'Amount'] = N:  
      DB( 'Fiili', 'Tax, Duty and Fees', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;  
    
['Fiili', '- Guarantee Expenses', 'Amount'] = N:  
      DB( 'Fiili', '8180700001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;    

['Fiili', '- packaging expenses', 'Amount'] = N:  
      DB( 'Fiili', '8180900001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- Used material from stock', 'Amount'] = N:  
      (DB( 'Fiili', 'Other Sales Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) + ['- packaging expenses']) * -1;     

['Fiili', '- insurance exp.', 'Amount'] = N:  
      DB( 'Fiili', 'Insurance Exp.', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- external services', 'Amount'] = N:  
      (DB( 'Fiili', 'External Services', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8081000004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8081000010', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8081000011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '8081000012', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
      
['Fiili', '- call center expenses', 'Amount'] = N:  
      (DB( 'Fiili', '8081000004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8081000010', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8081000011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8081000012', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', '- rental car expenses', 'Amount'] = N: IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025, 
      (DB( 'Fiili', 'Gas - Oil', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Maintenance (Cars)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Parking Etc.', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Expenses (Tax & Insurance  )', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8101700003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '8101700004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, CONTINUE);

['Fiili', '- rental car expenses', 'Amount'] = N:  
      (DB( 'Fiili', 'Gas - Oil', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Maintenance (Cars)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Parking Etc.', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Expenses (Tax & Insurance  )', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', '- advertisement, environment taxes and fees', 'Amount'] = N:  
      DB( 'Fiili', 'Other Taxes', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- management and consultancy expenses', 'Amount'] = N:  
      DB( 'Fiili', 'Other General Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- porterage expenses', 'Amount'] = N:  
      DB( 'Fiili', 'Porterage Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- external services (forklift)', 'Amount'] = N:  
      DB( 'Fiili', 'External Services (Forklift)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', '- other costs', 'Amount'] = N: IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025, 
      (DB( 'Fiili', 'General Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'Porterage Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'External Services (Forklift)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'IT Application Hosting', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'SAP Consultancy', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      ['- insurance exp.'] + ['- external services'] + ['- call center expenses'] + ['- rental car expenses'] + ['- packaging expenses'] + ['- advertisement, environment taxes and fees'] + 
      ['- management and consultancy expenses'] + ['- Tax, Duty and Fees'] + ['- Guarantee Expenses'] + ['- Used material from stock']) * -1, CONTINUE);    

['Fiili', '- other costs', 'Amount'] = N:  
      (DB( 'Fiili', 'General Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'Porterage Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'External Services (Forklift)', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      ['- insurance exp.'] + ['- external services'] + ['- call center expenses'] + ['- rental car expenses'] + ['- packaging expenses'] + ['- advertisement, environment taxes and fees'] + 
      ['- management and consultancy expenses'] + ['- Tax, Duty and Fees'] + ['- Guarantee Expenses'] + ['- Used material from stock']) * -1;    
      
['Fiili', 'Marketing costs', 'Amount'] = N:  
      DB( 'Fiili', 'Marketing', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', 'Retail Operating Profit - Before Pre-openning', 'Amount'] = N:  
      (['Operations contribution'] + ['Central costs'] + ['IT costs'] + ['Regional costs'] + ['R&D Costs']);
      
['Fiili', 'Short&Long term interest paid', 'Amount'] = N:  
      DB( 'Fiili', 'Bank Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;

['Fiili', 'Other Financial Expense', 'Amount'] = N:  IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025, 
      (DB( 'Fiili', 'Other Financial Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', 'Over Due Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, CONTINUE);

['Fiili', 'Other Financial Expense', 'Amount'] = N: 
      (DB( 'Fiili', 'Other Financial Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Over Due Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100024', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100025', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420700002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420700003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'Interest element of finance leases', 'Amount'] = N: IF( NUMBR( SUBST( !Period, 1, 4 )) >= 2025,
      (DB( 'Fiili', '6490100024', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100025', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100027', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420700002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420700003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1, CONTINUE);

['Fiili', 'Net pre-opening costs', 'Amount'] = N:  
      (DB( 'Fiili', '6590100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100012', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100013', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100014', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100015', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100016', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100017', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100018', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590100019', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'Given Exchange Rate Difference', 'Amount'] = N:  
      (DB( 'Fiili', '6460100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6460100002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6460100003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6460100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6460100005', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6460100006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100005', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6560100006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

#RegionStart AVM Özelinde İstisna Kurallar
['Fiili', 'Rent received external', '1340200', 'Amount'] = N:  
      (DB( 'Fiili', '6488099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6498099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1 -
      (DB( 'Fiili', 'COST', '1340201', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'Depreciation', '1340201', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ));
 
['Fiili', 'Rent received external', '1340300', 'Amount'] = N:  
      (DB( 'Fiili', '6490100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', '6498099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1 -
      (DB( 'Fiili', 'COST', '1340301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'Depreciation', '1340301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ));
 
['Fiili', 'Rent received external', '2350300', 'Amount'] = N:  
      (DB( 'Fiili', '6490100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', '6498099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1 -
      (DB( 'Fiili', 'COST', '2350301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', 'Depreciation', '2350301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ));

['Fiili', '- retail asset depreciation', '1340200', 'Amount'] = N:  
      (DB( 'Fiili', 'Depreciation', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Depreciation', '1340201', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
 
['Fiili', '- retail asset depreciation', '1340300', 'Amount'] = N:  
      (DB( 'Fiili', 'Depreciation', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Depreciation', '1340301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
      
['Fiili', '- retail asset depreciation', '2350300', 'Amount'] = N:  
      (DB( 'Fiili', 'Depreciation', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Depreciation', '2350301', !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
#EndRegion

['Fiili', 'Rent received external', 'Amount'] = N:  
      (DB( 'Fiili', '6490100004', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', '6498099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
       DB( 'Fiili', '6490100011', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;
      
['Fiili', '- retail asset depreciation', 'Amount'] = N:  
      DB( 'Fiili', 'Depreciation', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) * -1;
      
['Fiili', 'External interest received', 'Amount'] = N:  
     (DB( 'Fiili', '6420201001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420202001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6420201002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'R&D Costs', '9347777', 'Amount'] = N:  
      (DB( 'Fiili', 'COST', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Marketing', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Sales Transportation Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Bank Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Given Exchange Rate Differences', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Over Due Interest Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Other Financial Expenses', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', 'Credit Card Commissions', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'IT costs', '9340001', 'Amount'] = N:  
      (DB( 'Fiili', 'COST', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6540300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'RETAIL OPERATING PROFIT', 'Amount'] = N:  
      (['Retail Operating Profit - Before Pre-openning'] + ['Net pre-opening costs'] + ['Licence fees']);

['Fiili', 'TOTAL OPERATING PROFIT', 'Amount'] = N:  
      (['RETAIL OPERATING PROFIT'] + ['Rent received external'] + ['Other operations income']);

['Fiili', 'Other operations income', 'Amount'] = N:  
      (DB( 'Fiili', '6440100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6480000001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490000001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100003', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100005', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100007', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100009', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100010', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100012', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100013', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100014', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100015', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100016', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100017', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100018', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100020', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100021', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100022', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100023', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490100028', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490201006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490201009', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490209098', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6490209099', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6588099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6590000001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6790125401', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6790125501', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6798099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6790126401', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6790300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6790500001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6890125401', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6890125501', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6898099999', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6890126401', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6890300001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6540100001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) +
      DB( 'Fiili', '6810000001', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1;

['Fiili', 'Total costs', 'Amount'] = N:  (['Store costs'] + ['Marketing costs']);

['Fiili', 'Operations contribution', 'Amount'] = N:  (['Net margin'] + ['Total costs']);

['Fiili', 'Product discounts given', 'Amount'] = N:  
      (DB( 'Fiili', '611', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) + ['3P delivery cost (kdv dahil)']) * -1;

['Fiili', 'Buying margin', 'Amount'] = N:  
      ['NET SALES'] - ['Product discounts given'] - ['3P delivery cost (kdv dahil)'] + 
      (DB( 'Fiili', '621', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '6210101006', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '6210101007', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '6210101009', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  ) -
      DB( 'Fiili', '6210101002', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'Karşlılık Sonrası - Aylık'  )) * -1 - ['Supplier rebates'];

['Fiili', 'Net interest', 'Amount'] = N:  
      (['External interest received'] + ['Short&Long term interest paid'] + ['Given Exchange Rate Difference'] + ['Interest element of finance leases'] + ['Other Financial Expense']);

['Fiili', 'PROFIT BEFORE TAXATION', 'Amount'] = N:  (['TOTAL OPERATING PROFIT'] + ['Net interest']);

['Fiili', 'PROFIT AFTER TAXATION', 'Amount'] = N:  (['PROFIT BEFORE TAXATION'] + ['Tax']);

['Fiili', 'EBITDA', 'Amount' ] =  N: 
	[ 'Operations contribution', 'Amount' ] - [ '- retail asset depreciation', 'Amount' ] - [ '- credit card charges', 'Amount' ];

FEEDERS;

['Fiili', '- IT maintenance', 'Amount'] => ['- repairs and maintenance'];

['Fiili', '- packaging expenses', 'Amount'] => ['- Used material from stock'];

['Fiili', '- insurance exp.', 'Amount'] => ['- other costs'];
['Fiili', '- external services', 'Amount'] => ['- other costs'];
['Fiili', '- call center expenses', 'Amount'] => ['- other costs'];
['Fiili', '- rental car expenses', 'Amount'] => ['- other costs'];
['Fiili', '- packaging expenses', 'Amount'] => ['- other costs'];
['Fiili', '- advertisement, environment taxes and fees', 'Amount'] => ['- other costs'];
['Fiili', '- management and consultancy expenses', 'Amount'] => ['- other costs'];
['Fiili', '- Tax, Duty and Fees', 'Amount'] => ['- other costs'];
['Fiili', '- Guarantee Expenses', 'Amount'] => ['- other costs'];
['Fiili', '- Used material from stock', 'Amount'] => ['- other costs'];

['Fiili', 'Store costs', 'Amount'] => ['Total costs'];
['Fiili', 'Marketing costs', 'Amount'] => ['Total costs'];

['Fiili', 'Net margin', 'Amount'] => ['Operations contribution'];
['Fiili', 'Total costs', 'Amount'] => ['Operations contribution'];

['Fiili', '3P delivery cost (kdv dahil)', 'Amount'] => ['Product discounts given'], ['Buying margin'];
['Fiili', 'NET SALES', 'Amount'] => ['Buying margin'];  
  
['Fiili', 'Operations contribution', 'Amount'] => ['Retail Operating Profit - Before Pre-openning'];
['Fiili', 'Central costs', 'Amount'] => ['Retail Operating Profit - Before Pre-openning'];
['Fiili', 'IT costs', 'Amount'] => ['Retail Operating Profit - Before Pre-openning'];
['Fiili', 'Regional costs', 'Amount'] => ['Retail Operating Profit - Before Pre-openning'];
['Fiili', 'R&D Costs', 'Amount'] => ['Retail Operating Profit - Before Pre-openning'];

['Fiili', 'RETAIL OPERATING PROFIT', 'Amount'] => ['TOTAL OPERATING PROFIT'];
['Fiili', 'Rent received external', 'Amount'] => ['TOTAL OPERATING PROFIT'];
['Fiili', 'Other operations income', 'Amount'] => ['TOTAL OPERATING PROFIT'];

['Fiili', 'Retail Operating Profit - Before Pre-openning', 'Amount'] => ['RETAIL OPERATING PROFIT'];
['Fiili', 'Net pre-opening costs', 'Amount'] => ['RETAIL OPERATING PROFIT'];
['Fiili', 'Licence fees', 'Amount'] => ['RETAIL OPERATING PROFIT'];

['Fiili', 'External interest received', 'Amount'] => ['Net interest'];
['Fiili', 'Short&Long term interest paid', 'Amount'] => ['Net interest'];
['Fiili', 'Given Exchange Rate Difference', 'Amount'] => ['Net interest'];
['Fiili', 'Interest element of finance leases', 'Amount'] => ['Net interest'];
['Fiili', 'Other Financial Expense', 'Amount'] => ['Net interest'];

['Fiili', 'TOTAL OPERATING PROFIT', 'Amount'] => ['PROFIT BEFORE TAXATION'];
['Fiili', 'Net interest', 'Amount'] => ['PROFIT BEFORE TAXATION'];

['Fiili', 'PROFIT BEFORE TAXATION', 'Amount'] => ['PROFIT AFTER TAXATION'];
['Fiili', 'Tax', 'Amount'] => ['PROFIT AFTER TAXATION'];

['Fiili', { 'Operations contribution', '- retail asset depreciation', '- credit card charges' }, 'Amount' ] => [ 'EBITDA' ];

#Vergi Fiili Feedarları
['Fiili', 'PROFIT BEFORE TAXATION', 'All Cost Centers', 'Amount'] => DB( 'Vergi Fiili', !Version_Actual, !Period, 'PL Profit' );

#SPK Giriş Feederları
['Fiili', {'NET SALES', 'Buying margin', 'Stock transfer cost', 'Product discounts given', 'Shrinkage'}, 'Koçtaş Total', 'Amount'] => DB( 'SPK Giriş', 'COGS - cumulative', !Version_Actual, !Period, 'Amount' );
['Fiili', {'NET SALES', 'Buying margin', 'Stock transfer cost', 'Product discounts given', 'Shrinkage'}, 'Koçtaş Total', 'Amount'] => DB( 'SPK Giriş', 'COGS - month', !Version_Actual, !Period, 'Amount' );
['Fiili', 'Supplier rebates', 'Koçtaş Total', 'Amount'] => DB( 'SPK Giriş', 'Monthly Rebate', !Version_Actual, !Period, 'Amount' );
['Fiili', 'Supplier rebates', 'Koçtaş Total', 'Amount'] => DB( 'SPK Giriş', 'Rebate - Cumulative', !Version_Actual, ATTRS( 'Period', !Period, 'NYMonth' ), 'Amount' );

#Mağaza Performans Raporu Feederları
['Fiili', 'TOTAL NET SALES', 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'NET SALES' );
['Fiili', 'Operations contribution', 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'OPCO' );
['Fiili', {'Operations contribution', '- retail asset depreciation', '- credit card charges'}, 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'EBITDA' );
['Fiili', 'PROFIT BEFORE TAXATION', 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'PBT' );
['Fiili', '- rent', 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, '- rent' );
['Fiili', {'- staff (Payroll)', '- staff (exc. Payroll)', '- term. benefit provision', '- bonus'}, 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'total staff' );
['Fiili', {'External interest received', 'Short&Long term interest paid', 'Given Exchange Rate Difference', 'Interest element of finance leases', 'Other Financial Expense'}, 'Amount'] => DB( 'Mağaza Performans Raporu', !Masraf_Kar_Merkezleri, !Version_Actual, !Period, 'WCAP COST' );
